# 小狗粪便打卡开发文档

## 项目概述
宠物主人打卡记录小狗粪便的形态、颜色和时间，以及可能的影响因素（如饮食更换、刺激、异常行为、状态等），以可视化的形式长期追踪小狗的健康状态，并得到 AI 的健康建议。支持多宠物档案管理，提供直观的便便形态选择器和智能健康分析。

## 设计风格规范

### 整体设计风格
- **风格定位**：温馨、可爱、专业的宠物健康管理应用
- **色彩主题**：以温暖的橙色系为主色调，搭配清新的绿色和蓝色
- **背景颜色**：
  - 主背景：`#FFF8F3` (温暖的米白色)
  - 卡片背景：`#FFFFFF` (纯白色)
  - 强调色：`#FF8C42` (活力橙)
  - 辅助色：`#4ECDC4` (清新青绿)
  - 文字色：`#2C3E50` (深蓝灰)

### 视觉元素
- **图标风格**：圆润的线性图标，2px 线宽
- **按钮样式**：圆角矩形，8px 圆角
- **卡片样式**：12px 圆角，轻微阴影
- **字体**：系统默认字体，标题加粗

## 核心页面设计

### 1. 首页 (index) - 三频道底部导航
**主要功能**：多宠物档案管理，便便日历查看，三频道底部导航

**页面元素**：
- **宠物选择器**：温馨卡片设计
  - 标题："我家的小可爱"
  - 宠物头像展示：圆形头像，选中状态有爱心动画
  - 管理宠物按钮：支持添加、编辑、删除操作
- **首页内容**：
  - **便便日历**：显示每日便便形态小图标
    - 颜色标识：橙色=今天，蓝色=有记录，红色=异常
  - **本周总结**：智能分析本周健康情况
- **底部三频道导航**：
  - **左频道**：🏠 首页（当前页面）
  - **中频道**：📝 记录（跳转记录页面）
  - **右频道**：🤖 问AI（跳转AI对话页面）

**布局结构**：
```
[宠物选择器 - 温馨卡片]
├─ [我家的小可爱] [管理宠物]
└─ [宠物头像1] [宠物头像2] [添加宠物]
[首页内容]
├─ [便便日历]
└─ [本周总结]
[底部三频道导航 - 固定底部]
├─ [🏠 首页] [📝 记录] [🤖 问AI]
```

### 2. 记录页面 (record) - 直观形态选择
**主要功能**：直观记录便便信息，智能分析反馈

**页面元素**：
- 页面标题：记录便便
- 记录表单：
  - 时间选择器（默认当前时间）
  - **便便形态选择器**（直观图标设计）：
    - 🌟 完美：成型良好
    - ✅ 正常：形状规整
    - 🍮 偏软：稍微偏软
    - 🪨 偏硬：比较干燥
    - 💧 稀状：不成型
    - 🔸 带粘液：有粘液
  - 便便颜色选择（预设颜色 + 自定义）
  - **异常症状标签**（可选）：
    - 带血、有虫、恶臭、泡沫、发白、发黑、发绿、发黄、便秘、腹泻
  - 便便数量（1-5个）
  - 影响因素标签（饮食更换、药物、运动、压力、换环境、生病、疫苗、驱虫等）
  - 备注输入框
- 保存按钮：全宽橙色按钮
- 取消按钮：文字按钮

**智能反馈**：
- **正常便便**：弹出恭喜对话框，鼓励继续保持
- **异常便便**：显示AI分析对话框，提供异常原因和建议
- **继续沟通**：点击跳转AI对话页面深入探讨

**布局结构**：
```
[页面标题]
[时间选择]
[便便形态选择器]
[颜色选择器]
[异常症状标签]
[数量选择器]
[影响因素标签]
[备注输入]
[保存/取消按钮]
```

### 3. 统计页面 (statistics)
**主要功能**：可视化展示健康趋势

**页面元素**：
- 页面标题：健康统计
- 时间筛选器：本周/本月/自定义
- 健康概览卡片：
  - 平均硬度趋势图
  - 颜色分布饼图
  - 记录频率统计
- 趋势图表：
  - 硬度变化折线图
  - 颜色变化柱状图
  - 影响因素分析
- AI 健康建议卡片：
  - 基于数据的健康评估
  - 改善建议
  - 注意事项

**布局结构**：
```
[页面标题]
[时间筛选器]
[健康概览卡片]
[趋势图表区域]
[AI 健康建议]
```

### 4. 记录列表页面 (history)
**主要功能**：查看历史记录详情

**页面元素**：
- 页面标题：历史记录
- 搜索筛选器：按日期、硬度、颜色筛选
- 记录列表：
  - 每条记录卡片显示：
    - 日期时间
    - 硬度颜色指示器
    - 简要信息（形状、数量）
    - 影响因素标签
- 加载更多按钮
- 空状态提示

**布局结构**：
```
[页面标题]
[搜索筛选器]
[记录列表]
[加载更多/空状态]
```

### 5. 我的页面 (profile)
**主要功能**：个人信息和设置

**页面元素**：
- 用户头像和昵称
- 宠物信息卡片：
  - 宠物头像
  - 宠物姓名
  - 年龄、品种
  - 健康状态
- 功能菜单：
  - 数据导出
  - 提醒设置
  - 健康报告
  - 帮助中心
  - 关于我们
- 设置选项：
  - 通知设置
  - 隐私设置
  - 数据备份

**布局结构**：
```
[用户信息]
[宠物信息卡片]
[功能菜单]
[设置选项]
```

### 6. AI对话页面 (ai-chat)
**主要功能**：与AI医生深入沟通宠物健康问题

**页面元素**：
- 页面标题：AI医生
- 对话界面：
  - 消息气泡显示
  - 用户输入框
  - 发送按钮
- AI分析功能：
  - 获取历史记录数据
  - 针对特定宠物分析
  - 提出针对性问题
  - 提供专业建议
- 快捷回复：
  - 常见问题快速选择
  - 症状描述模板

**布局结构**：
```
[页面标题]
[对话消息区域]
[快捷回复区域]
[输入框+发送按钮]
```

## 交互设计规范

### 动画效果
- 页面切换：300ms 淡入淡出
- 按钮点击：100ms 缩放反馈
- 列表项：200ms 滑动进入
- 图表加载：500ms 渐现动画

### 手势操作
- 左滑删除记录
- 下拉刷新数据
- 长按快速记录
- 双击查看详情

## 数据模型

### 便便记录数据结构
```javascript
{
  id: String,           // 记录ID
  timestamp: Date,      // 记录时间
  time: String,         // 记录时间（用户选择）
  shape: String,        // 便便形态（perfect/normal/soft/hard/watery/mucous）
  color: String,        // 颜色代码
  quantity: Number,     // 数量 1-5
  symptoms: Array,      // 异常症状标签
  factors: Array,       // 影响因素标签
  notes: String,        // 备注
  healthScore: Number   // 健康评分
}
```

### 宠物档案数据结构
```javascript
{
  id: String,           // 宠物ID
  name: String,         // 宠物姓名
  emoji: String,        // 宠物头像emoji
  breed: String,        // 品种
  age: Number,          // 年龄
  weight: Number,       // 体重
  records: Array        // 关联的记录ID列表
}
```

### 健康评估算法
- **形态评分**（40%权重）：
  - 完美形态：不减分
  - 正常形态：减5分
  - 偏软/偏硬：减15分
  - 严重异常：减25分
- **颜色评分**（30%权重）：
  - 正常颜色：不减分
  - 轻微异常：减5分
  - 异常颜色：减20分
- **异常症状**（20%权重）：
  - 每个症状减8分
- **影响因素**（10%权重）：
  - 生病/压力：减10分

### 智能分析功能
- **正常便便**：显示恭喜对话框，鼓励继续保持
- **异常便便**：生成详细分析报告
  - 形态分析：解释可能原因
  - 颜色分析：健康风险评估
  - 症状分析：针对性建议
  - 继续沟通：跳转AI对话页面

## 核心功能特性

### 1. 直观的便便形态选择
- **友好图标设计**：使用emoji图标，避免恶心感
- **清晰描述**：每个选项都有简短说明
- **视觉反馈**：选中状态有明显的视觉变化
- **智能推荐**：根据历史记录推荐常见选择

### 2. 便便日历视图
- **小图标显示**：每天显示对应的便便形态图标
- **颜色编码**：
  - 橙色边框：今天
  - 蓝色边框：有记录
  - 红色边框：异常日期
- **点击交互**：点击日期查看当天详细记录
- **月度视图**：支持查看不同月份的历史数据

### 3. 三频道底部导航
- **左频道**：📅 首页（便便日历 + 本周总结）
- **中频道**：💩 记录（跳转记录页面）
- **右频道**：🤖 问AI（跳转AI对话页面）
- **固定底部**：每个频道占据1/3宽度，点击切换

### 4. 多宠物档案管理
- **顶部滑动选择器**：快速切换不同宠物
- **独立数据存储**：每只宠物有独立的记录档案
- **个性化分析**：AI针对不同宠物提供个性化建议
- **添加功能**：支持添加新宠物档案

### 5. 智能健康分析
- **实时评分**：记录时自动计算健康评分
- **智能反馈**：
  - 正常：恭喜对话框 + 鼓励信息
  - 异常：详细分析 + 继续沟通入口
- **AI对话**：深入探讨健康问题，获取专业建议

### 6. 异常症状识别
- **症状标签**：带血、有虫、恶臭、泡沫等
- **风险评估**：根据症状严重程度给出建议
- **就医提醒**：严重症状时提醒及时就医

## 技术实现要点

### 数据存储
- 本地存储：使用微信小程序本地存储
- 数据同步：支持云端备份
- 数据导出：支持 CSV/PDF 格式

### 图表组件
- 使用 ECharts 或 Chart.js
- 响应式设计，适配不同屏幕
- 支持交互式数据查看

### AI 建议功能
- **智能分析**：基于历史数据的模式识别
- **健康预警**：异常情况及时提醒
- **个性化建议**：针对每只宠物的改善建议
- **深度对话**：AI医生可获取长期记录，提供针对性分析
- **问题引导**：主动提出相关问题，深入探讨健康问题

### 多宠物管理
- **独立档案**：每只宠物有独立的记录档案
- **快速切换**：顶部滑动选择器快速切换宠物
- **数据隔离**：各宠物数据独立存储和分析
- **个性化分析**：AI针对不同宠物提供个性化建议
