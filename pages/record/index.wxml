<!--pages/record/index.wxml-->
<view class="container">
  <view class="page-header">
    <text class="page-title">ä¾¿ä¾¿è®°å½•</text>
  </view>

  <view class="form-section">
    <view class="section-title">æ—¥æœŸæ—¶é—´</view>
    <view class="datetime-selector">
      <picker mode="multiSelector" range="{{datetimeRange}}" value="{{datetimeIndex}}" bindchange="onDateTimeChange">
        <view class="picker-item">
          <text class="picker-value">{{displayDateTime}}</text>
        </view>
      </picker>
    </view>
  </view>

  <view class="form-section">
    <view class="section-title">ä¾¿ä¾¿å½¢æ€</view>
    <view class="shape-selector">
      <view 
        class="poop-item {{selectedShape === item.value ? 'selected' : ''}}"
        wx:for="{{poopShapes}}" 
        wx:key="value"
        bindtap="selectShape"
        data-value="{{item.value}}"
      >
        <view class="shape-icon">{{item.icon}}</view>
        <text class="shape-text">{{item.label}}</text>
        <text class="shape-desc">{{item.description}}</text>
      </view>
    </view>
  </view>

  <view class="form-section">
    <view class="section-title">é¢œè‰²</view>
    <view class="color-selector">
      <view 
        class="color-item {{selectedColor === item.value ? 'selected' : ''}}"
        wx:for="{{colorOptions}}" 
        wx:key="value"
        bindtap="selectColor"
        data-value="{{item.value}}"
      >
        <view class="color-circle" style="background-color: {{item.color}}"></view>
        <text class="color-label">{{item.label}}</text>
      </view>
    </view>
  </view>

  <view class="form-section">
    <view class="section-title">ä¾¿ä¾¿é‡</view>
    <view class="amount-selector">
      <view class="amount-display">
        <text class="amount-label">{{amountLabel}}</text>
      </view>
      <slider 
        class="amount-slider"
        min="0" 
        max="100" 
        value="{{amountValue}}" 
        bindchange="onAmountChange"
        activeColor="#FF8C42"
        backgroundColor="#E8E8E8"
        block-size="20"
      />
      <view class="amount-labels">
        <text class="amount-label-item">åå°‘</text>
        <text class="amount-label-item">æ­£å¸¸</text>
        <text class="amount-label-item">åå¤š</text>
      </view>
    </view>
  </view>

  <view class="form-section">
    <view class="section-title">ä¾¿ä¾¿ç¯å¢ƒ</view>
    <view class="environment-selector">
      <view 
        class="environment-item {{selectedEnvironment === item.value ? 'selected' : ''}}"
        wx:for="{{environmentOptions}}" 
        wx:key="value"
        bindtap="selectEnvironment"
        data-value="{{item.value}}"
      >
        <view class="environment-icon">{{item.icon}}</view>
        <text class="environment-text">{{item.label}}</text>
      </view>
    </view>
  </view>

  <view class="form-section">
    <view class="section-title">å¼‚å¸¸ç—‡çŠ¶ï¼ˆå¯é€‰ï¼‰</view>
    <view class="symptoms-container">
      <view 
        class="symptom-tag {{selectedSymptom === item ? 'selected' : ''}}"
        wx:for="{{symptomOptions}}" 
        wx:key="*this"
        bindtap="selectSymptom"
        data-symptom="{{item}}"
      >
        {{item}}
      </view>
    </view>
  </view>

  <view class="form-section">
    <view class="section-title">å½±å“å› ç´ ï¼ˆå¯é€‰ï¼‰</view>
    <view class="factors-container">
      <view 
        class="factor-tag {{selectedFactor === item ? 'selected' : ''}}"
        wx:for="{{factorOptions}}" 
        wx:key="*this"
        bindtap="selectFactor"
        data-factor="{{item}}"
      >
        {{item}}
      </view>
    </view>
  </view>

  <view class="form-section">
    <view class="section-title">å¤‡æ³¨ï¼ˆé€‰å¡«ï¼‰</view>
    <textarea 
      class="notes-input" 
      placeholder="è®°å½•å…¶ä»–é‡è¦ä¿¡æ¯..."
      value="{{notes}}"
      bindinput="onNotesInput"
      maxlength="200"
    ></textarea>
  </view>

  <view class="button-section">
    <button class="cancel-btn" bindtap="cancelRecord">å–æ¶ˆ</button>
    <button class="save-btn" bindtap="saveRecord">ä¿å­˜è®°å½•</button>
  </view>

  <view class="bottom-nav">
    <view class="nav-item" bindtap="goToHome">
      <text class="nav-icon">ğŸ </text>
      <text class="nav-text">é¦–é¡µ</text>
    </view>
    
    <view class="nav-item active">
      <text class="nav-icon">ğŸ“</text>
      <text class="nav-text">è®°å½•</text>
    </view>
    
    <view class="nav-item">
      <text class="nav-icon">ğŸ¤–</text>
      <text class="nav-text">é—®AI</text>
    </view>
  </view>
</view>