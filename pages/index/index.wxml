<!--pages/index/index.wxml-->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <text class="page-title">å®Œç¾ğŸ’©è®°</text>
  </view>

  <!-- å® ç‰©åˆ‡æ¢æ ‡ç­¾ -->
  <view class="pet-tabs">
    <scroll-view class="pet-tabs-scroll" scroll-x="true" show-scrollbar="false">
      <view class="pet-tabs-container">
        <view 
          wx:for="{{pets}}"
          wx:key="id"
          class="pet-tab {{currentPetId === item.id ? 'active' : ''}}"
          catchtap="selectPet"
          data-pet-id="{{item.id}}"
        >
          <text class="pet-tab-name">{{item.name}}</text>
          <view class="pet-tab-underline" wx:if="{{currentPetId === item.id}}"></view>
        </view>
        <view class="add-pet-tab" catchtap="addPet">
          <text class="add-pet-icon">+</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- å® ç‰©ä¿¡æ¯å¡ç‰‡ -->
  <view class="pet-info-card">
    <view class="pet-info-content">
      <view class="pet-avatar-section">
        <view class="pet-avatar-large">
          <image wx:if="{{currentPet.avatar}}" src="{{currentPet.avatar}}" class="pet-avatar-image" mode="aspectFill"></image>
          <text wx:else class="pet-emoji">{{currentPet.emoji}}</text>
        </view>
      </view>
      <view class="pet-details">
        <view class="pet-basic-info">
          <view class="info-tag tag-age">
            <text class="tag-text">{{currentPet.age}}</text>
          </view>
          <view class="info-tag tag-gender">
            <text class="tag-text">{{currentPet.gender}}</text>
          </view>
          <view class="info-tag tag-weight">
            <text class="tag-text">{{currentPet.weight}}</text>
          </view>
          <view class="info-tag tag-breed">
            <text class="tag-text">{{currentPet.breed}}</text>
          </view>
        </view>
        <view class="pet-cute-phrase">
          <view class="info-tag tag-phrase">
            <text class="tag-text">{{currentPet.phrase}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- å‘¨æ€»ç»“å¡ç‰‡ -->
  <view class="weekly-summary">
    <view class="summary-header">
      <text class="summary-title">ğŸ“Š æœ¬å‘¨æ€»ç»“</text>
    </view>
    <text class="summary-text">{{weeklySummary}}</text>
  </view>

  <!-- é¦–é¡µå†…å®¹ -->
  <view class="home-content">
    <!-- æ—¥å†å¡ç‰‡ -->
    <view class="calendar-card">
      <!-- é¡¶éƒ¨ï¼šæœˆä»½ + æ—¥å†å›¾æ ‡ -->
      <view class="calendar-top-bar">
        <text class="current-month">{{currentMonth}}</text>
        <view class="calendar-icon">
          <text class="icon-text">ğŸ“…</text>
        </view>
      </view>
      
      <!-- ç»Ÿä¸€çš„æ˜ŸæœŸ+æ—¥æœŸè¡Œ -->
      <view class="calendar-week-row">
        <!-- å·¦ç®­å¤´ -->
        <view class="week-arrow-left" catchtap="prevWeek">
          <text class="arrow-icon">â€¹</text>
        </view>
        
        <!-- 7ä¸ªæ—¥æœŸå•å…ƒæ ¼ -->
        <view class="calendar-day-cell {{item.isToday ? 'today' : ''}}" wx:for="{{calendarDays}}" wx:key="date" bindtap="viewDayRecord" data-date="{{item.date}}">
          <text class="weekday-abbr">{{weekdayLabels[item.index].label}}</text>
          <text class="day-number">{{item.day}}</text>
        </view>
        
        <!-- å³ç®­å¤´ -->
        <view class="week-arrow-right" catchtap="nextWeek">
          <text class="arrow-icon">â€º</text>
        </view>
      </view>
    </view>
  </view>
  <!-- è‡ªå®šä¹‰åº•éƒ¨ä¸‰é¢‘é“å…¥å£ -->
  <view class="bottom-channels">
    <!-- å·¦é¢‘é“ï¼šé¦–é¡µ -->
    <view class="channel-entry active" catchtap="switchChannel" data-channel="home">
      <view class="channel-icon">ğŸ </view>
    </view>
    
    <!-- ä¸­é—´åŠ å·æŒ‰é’® -->
    <view class="add-button" catchtap="addRecord">
      <text class="add-icon">+</text>
    </view>
    
    <!-- å³é¢‘é“ï¼šAI -->
    <view class="channel-entry" catchtap="switchChannel" data-channel="ai">
      <view class="channel-icon">ğŸ¤–</view>
    </view>
  </view>

</view>