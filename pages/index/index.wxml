<!--pages/index/index.wxml-->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <text class="page-title">å®Œç¾ğŸ’©è®°</text>
  </view>

  <!-- å® ç‰©åˆ‡æ¢æ ‡ç­¾ -->
  <view class="pet-tabs">
    <scroll-view class="pet-tabs-scroll" scroll-x="true" show-scrollbar="false">
      <view class="pet-tabs-container">
        <view 
          wx:for="{{pets}}"
          wx:key="id"
          class="pet-tab {{currentPetId === item.id ? 'active' : ''}}"
          catchtap="selectPet"
          data-pet-id="{{item.id}}"
        >
          <text class="pet-tab-name">{{item.name}}</text>
          <view class="pet-tab-underline" wx:if="{{currentPetId === item.id}}"></view>
        </view>
        <view class="add-pet-tab" catchtap="addPet">
          <text class="add-pet-icon">+</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- å® ç‰©ä¿¡æ¯å¡ç‰‡ -->
  <view class="pet-info-card">
    <view class="pet-info-content">
      <view class="pet-avatar-section">
        <view class="pet-avatar-large">
          <image wx:if="{{currentPet.avatar}}" src="{{currentPet.avatar}}" class="pet-avatar-image" mode="aspectFill"></image>
          <text wx:else class="pet-emoji">{{currentPet.emoji}}</text>
        </view>
      </view>
      <view class="pet-details">
        <view class="pet-basic-info">
          <view class="info-item">
            <text class="info-label">å¹´é¾„</text>
            <text class="info-value">{{currentPet.age}}</text>
          </view>
          <view class="info-item">
            <text class="info-label">æ€§åˆ«</text>
            <text class="info-value">{{currentPet.gender}}</text>
          </view>
          <view class="info-item">
            <text class="info-label">ä½“é‡</text>
            <text class="info-value">{{currentPet.weight}}</text>
          </view>
        </view>
        <view class="pet-cute-phrase">
          <text class="phrase-text">{{currentPet.phrase}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- é¦–é¡µå†…å®¹ -->
  <view class="home-content">
    <!-- æ—¥å†å¡ç‰‡ -->
    <view class="calendar-card">
      <view class="calendar-header">
        <view class="month-arrow left-arrow" catchtap="previousMonth">
          <text class="arrow-icon">â€¹</text>
        </view>
        <text class="current-month">{{currentMonth}}</text>
        <view class="month-arrow right-arrow" catchtap="nextMonth">
          <text class="arrow-icon">â€º</text>
        </view>
      </view>
      <!-- æ˜ŸæœŸæ ‡é¢˜ -->
      <view class="weekday-header">
        <view class="weekday-item" wx:for="{{weekdays}}" wx:key="*this">
          <text class="weekday-text">{{item}}</text>
        </view>
      </view>
      
      <view class="calendar-grid">
        <view 
          class="calendar-day {{item.isToday ? 'today' : ''}} {{item.hasRecord ? 'has-record' : ''}} {{item.isAbnormal ? 'abnormal' : ''}}"
          wx:for="{{calendarDays}}" 
          wx:key="date"
          bindtap="viewDayRecord"
          data-date="{{item.date}}"
        >
          <text class="day-number">{{item.day}}</text>
          <text class="poop-icon" wx:if="{{item.poopIcon}}">{{item.poopIcon}}</text>
        </view>
      </view>
    </view>

    <!-- å‘¨æ€»ç»“å¡ç‰‡ -->
    <view class="weekly-summary">
      <view class="summary-header">
        <text class="summary-title">ğŸ“Š æœ¬å‘¨æ€»ç»“</text>
      </view>
      <text class="summary-text">{{weeklySummary}}</text>
    </view>
  </view>
  <!-- è‡ªå®šä¹‰åº•éƒ¨ä¸‰é¢‘é“å…¥å£ -->
  <view class="bottom-channels">
    <!-- å·¦é¢‘é“ï¼šé¦–é¡µ -->
    <view class="channel-entry active" catchtap="switchChannel" data-channel="home">
      <view class="channel-icon">ğŸ </view>
    </view>
    
    <!-- ä¸­é—´åŠ å·æŒ‰é’® -->
    <view class="add-button" catchtap="addRecord">
      <text class="add-icon">+</text>
    </view>
    
    <!-- å³é¢‘é“ï¼šAI -->
    <view class="channel-entry" catchtap="switchChannel" data-channel="ai">
      <view class="channel-icon">ğŸ¤–</view>
    </view>
  </view>

</view>